{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.js","src/js/app/app.js","src/js/app/background.js","src/js/app/bodyclass.js","src/js/app/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"global","window","$","angular","background","bodyclass","utils","pimpClasses","f5SkinApp","module","controller","$scope","stdPreferences","JSON","parse","text","usrPreferences","param","extend","f5CoreInfo","setImage","timeSlots","topbar","menuItems","topics","siteAlias","toLowerCase","has","breadcrumbs","items","getBreadcrumbs","abo","getSpecialMenu","images","isLoggedIn","userName","isAdmin","userRole","isContributor","sendMail","location","href","rot13","mailIcon","msgClose","fadeOut","this","self","./background.js","./bodyclass.js","./utils.js",2,"h","Date","getHours","each","from","to","css","background-image","background-repeat","repeat","background-position","position","background-attachment","attachment","background-size","size","height",3,"pathname","path","replace","trim","split","addClass",4,"linksToObjects","selector","linkObjects","push","innerText","menuID","c","String","fromCharCode","charCodeAt"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('jquery');\r\nvar angular = require('angular'),\r\n    background = require('./background.js'),\r\n    bodyclass = require('./bodyclass.js'),\r\n    utils = require('./utils.js');\r\n\r\n//--- Add additional body classes for individualized CSS rules\r\nbodyclass();\r\n\r\n//--- Pimp old Twoday classes, e.g. button in a .message\r\nutils.pimpClasses();\r\n\r\n//--- Set up the Angular app and controller\r\nvar f5SkinApp = angular.module(\"f5SkinApp\", ['mm.foundation']);\r\nf5SkinApp.controller(\"F5SkinController\", [\"$scope\", function ($scope){\r\n\r\n//- Consolidate standardPreferences, userPreferences and generic core info from Twoday macros\r\n    var stdPreferences = JSON.parse($(\"#stdPreferences\").text() || \"{}\"),\r\n        usrPreferences = JSON.parse($(\"#usrPreferences\").text() || \"{}\");\r\n    $scope.param = $.extend( {}, stdPreferences, usrPreferences, f5CoreInfo );\r\n\r\n//- Set background image based on hour of the day and user defined image items/slots\r\n    background.setImage($scope.param.timeSlots);\r\n\r\n//- Set default value for topics.text if user has not provided one\r\n    if ($scope.param.topbar.menuItems.topics.text.length===0)\r\n        $scope.param.topbar.menuItems.topics.text = $scope.param.siteAlias.toLowerCase();\r\n\r\n//- Adjust topics.class if topiclist-macro has found/generated any story topics\r\n    $scope.param.topbar.menuItems.topics.class = ($(\"#toolbarTopics\").has(\".dropdown\") ? \"has-dropdown\" : \"\");\r\n\r\n//- Extract breadcrumb/special menu links and put them into the scope\r\n    $scope.param.topbar.menuItems.breadcrumbs.items = utils.getBreadcrumbs();\r\n    $scope.param.topbar.menuItems.abo.items = utils.getSpecialMenu(\"#aboMenu\");\r\n    $scope.param.topbar.menuItems.images.items = utils.getSpecialMenu(\"#imageMenu\");\r\n\r\n//- Add utility functions to be used in ng-functions (view)\r\n    $scope.param.isLoggedIn = function(){\r\n        return ($scope.param.userName.length>0);\r\n    };\r\n    $scope.param.isAdmin = function(){\r\n        return ($scope.param.isLoggedIn() && $scope.param.userRole()===\"Administrator\");\r\n    };\r\n    $scope.param.isContributor = function(){\r\n        return ($scope.param.isLoggedIn() && ($scope.param.userRole()===\"Contributor\" || $scope.param.userRole()===\"Administrator\"));\r\n    };\r\n    $scope.param.sendMail = function(){\r\n        window.location.href = utils.rot13($scope.param.topbar.mailIcon.href);\r\n    };\r\n//- When true (user clicked the close button), it triggers the fadeout of the response alert-box\r\n    $scope.msgClose = false;\r\n    $(\"#preloadWrapper\").fadeOut();\r\n}]);","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\nvar angular = (typeof window !== \"undefined\" ? window.angular : typeof global !== \"undefined\" ? global.angular : null),\r\n    background = require('./background.js'),\r\n    bodyclass = require('./bodyclass.js'),\r\n    utils = require('./utils.js');\r\n\r\n//--- Add additional body classes for individualized CSS rules\r\nbodyclass();\r\n\r\n//--- Pimp old Twoday classes, e.g. button in a .message\r\nutils.pimpClasses();\r\n\r\n//--- Set up the Angular app and controller\r\nvar f5SkinApp = angular.module(\"f5SkinApp\", ['mm.foundation']);\r\nf5SkinApp.controller(\"F5SkinController\", [\"$scope\", function ($scope){\r\n\r\n//- Consolidate standardPreferences, userPreferences and generic core info from Twoday macros\r\n    var stdPreferences = JSON.parse($(\"#stdPreferences\").text() || \"{}\"),\r\n        usrPreferences = JSON.parse($(\"#usrPreferences\").text() || \"{}\");\r\n    $scope.param = $.extend( {}, stdPreferences, usrPreferences, f5CoreInfo );\r\n\r\n//- Set background image based on hour of the day and user defined image items/slots\r\n    background.setImage($scope.param.timeSlots);\r\n\r\n//- Set default value for topics.text if user has not provided one\r\n    if ($scope.param.topbar.menuItems.topics.text.length===0)\r\n        $scope.param.topbar.menuItems.topics.text = $scope.param.siteAlias.toLowerCase();\r\n\r\n//- Adjust topics.class if topiclist-macro has found/generated any story topics\r\n    $scope.param.topbar.menuItems.topics.class = ($(\"#toolbarTopics\").has(\".dropdown\") ? \"has-dropdown\" : \"\");\r\n\r\n//- Extract breadcrumb/special menu links and put them into the scope\r\n    $scope.param.topbar.menuItems.breadcrumbs.items = utils.getBreadcrumbs();\r\n    $scope.param.topbar.menuItems.abo.items = utils.getSpecialMenu(\"#aboMenu\");\r\n    $scope.param.topbar.menuItems.images.items = utils.getSpecialMenu(\"#imageMenu\");\r\n\r\n//- Add utility functions to be used in ng-functions (view)\r\n    $scope.param.isLoggedIn = function(){\r\n        return ($scope.param.userName.length>0);\r\n    };\r\n    $scope.param.isAdmin = function(){\r\n        return ($scope.param.isLoggedIn() && $scope.param.userRole()===\"Administrator\");\r\n    };\r\n    $scope.param.isContributor = function(){\r\n        return ($scope.param.isLoggedIn() && ($scope.param.userRole()===\"Contributor\" || $scope.param.userRole()===\"Administrator\"));\r\n    };\r\n    $scope.param.sendMail = function(){\r\n        window.location.href = utils.rot13($scope.param.topbar.mailIcon.href);\r\n    };\r\n//- When true (user clicked the close button), it triggers the fadeout of the response alert-box\r\n    $scope.msgClose = false;\r\n    $(\"#preloadWrapper\").fadeOut();\r\n}]);","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\n/**\r\n * Sets the appropriate background image based on the actual hour of the day and user defined image items/slots\r\n */\r\nmodule.exports = {\r\n    setImage: function(timeSlots){\r\n//----- return immediately if there are no user defined time slots/images        \r\n        if (timeSlots.length===0) return;\r\n//----- get the current hour of the day        \r\n        var h = new Date().getHours();\r\n//----- check with each timeslot to find the appropriate entry\r\n        $.each( timeSlots, function(){\r\n            if (h>=this.from && h<this.to){\r\n//------------- once timeslot was found set the background-image with all params                \r\n                $('body').css({\r\n                    'background-image': 'url(\"'+this.href+'\")',\r\n                    'background-repeat': this.repeat,\r\n                    'background-position': this.position,\r\n                    'background-attachment': this.attachment,\r\n                    'background-size': this.size,\r\n                    'height': '100%'\r\n                });\r\n//------------- then quit the each loop\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n};","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\n/**\r\n * Adds additional classes to the BODY element\r\n * onHome ~ if the homepage is displayed\r\n * onTopic ~ if a topic page is displayed\r\n * topic-{topicID} ~ ID of the topic (lowercase ID)\r\n * onStory ~ if a story is displayed\r\n * story-{storyID} ~ ID of the story (lowercase ID)\r\n *\r\n * Examples:\r\n * pathname=\"/\" ===> bodyclasses=\"onHome\"\r\n * pathname=\"/topics/Testthema/\" ==> bodyclasses=\"onTopic topic-testthema\"\r\n * pathname=\"/stories/is-it-me-youre-looking-for/\" ==> bodyclasses=\"onStory story-is-it-me-youre-looking-for\"\r\n *\r\n */\r\nmodule.exports = function(){\r\n    var bodyclass = \"\";\r\n    if (location.pathname===\"/\") bodyclass = \"onHome\";\r\n    else {\r\n        var path = location.pathname.replace(/\\//g, \" \").trim().split(\" \");\r\n        switch (path[0]) {\r\n            case \"topics\":  bodyclass = \"onTopic \" + path[1].toLowerCase(); break;\r\n            case \"stories\": bodyclass = \"onStory \" + path[1].toLowerCase(); break;\r\n        }\r\n    }\r\n    if (bodyclass.length>0) $(\"body\").addClass(bodyclass);\r\n};","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\nmodule.exports = {\r\n\r\n//- Converts selected DOM links to an array of link objects (href,text)\r\n    linksToObjects: function(selector){\r\n        var linkObjects = [];\r\n            $(selector).each( function(){\r\n                linkObjects.push({ \"href\": this.href, \"text\": this.innerText });\r\n            });\r\n        return linkObjects;\r\n    },\r\n\r\n//- Extract breadcrumbs-links out of Twoday's modToolbarNavigationpath-macro and return as an array of link objects\r\n    getBreadcrumbs: function(){\r\n        return this.linksToObjects(\"#breadcrumbsMenu >a:not([id])\");\r\n    },\r\n\r\n//- Get special menu items (imageMenu/aboMenu) as an array of link objects\r\n    getSpecialMenu: function(menuID){\r\n        return this.linksToObjects(menuID+\" a\");\r\n    },\r\n\r\n//- Pimp server generated Twoday classes to enforce Foundation style\r\n    pimpClasses: function(){\r\n        $(\".message .button\").addClass(\"secondary tiny radius\");\r\n    },\r\n\r\n//- Rotation13 method used to obfuscate email-address\r\n    rot13: function(s){\r\n        return s.replace(/[a-zA-Z]/g, function(c){\r\n            return String.fromCharCode((c <= \"Z\" ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26);\r\n        });\r\n    }\r\n\r\n};"],"sourceRoot":"/source/"}