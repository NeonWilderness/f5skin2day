{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.js","src/js/app/app.js","src/js/app/background.js","src/js/app/bodyclass.js","src/js/app/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"global","window","$","angular","background","bodyclass","utils","pimpClasses","f5SkinApp","module","factory","stdPreferences","JSON","parse","text","usrPreferences","extend","f5CoreInfo","controller","$scope","preferences","$modal","param","setImage","timeSlots","topbar","menuItems","topics","siteAlias","toLowerCase","drop","has","breadcrumbs","items","getBreadcrumbs","console","dir","abo","getSpecialMenu","images","isLoggedIn","userName","isAdmin","userRole","isContributor","sendMail","location","href","rot13","mailIcon","msgClose","customize","open","modalCustomize","templateUrl","resolve","backdrop","keyboard","windowClass","result","then","$modalInstance","ok","close","cancel","dismiss","input","setStaticFolder","site","imgFolder","staticUrl","testLoader","show","delay","hide","positions","repeats","sizes","attachments","isEditMode","isCreateMode","edit","index","slot","copy","save","insert","update","push","splice","create","from","to","repeat","position","size","attachment","usePosition","useRepeat","useSize","useAttachment","this","self","./background.js","./bodyclass.js","./utils.js",2,"h","Date","getHours","each","attr","load","remove","css","background-image","background-repeat","background-position","background-attachment","background-size","height","fadeOut",3,"pathname","path","replace","trim","split","addClass",4,"linksToObjects","selector","linkObjects","innerText","menuID","c","String","fromCharCode","charCodeAt"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('jquery');\r\nvar angular = require('angular'),\r\n    background = require('./background.js'),\r\n    bodyclass = require('./bodyclass.js'),\r\n    utils = require('./utils.js');\r\n\r\n//--- Add additional body classes for individualized CSS rules\r\nbodyclass();\r\n\r\n//--- Pimp old Twoday classes, e.g. button in a .message\r\nutils.pimpClasses();\r\n\r\n//--- Set up the Angular app and controller\r\nvar f5SkinApp = angular.module(\"f5SkinApp\", ['mm.foundation']);\r\n\r\nf5SkinApp.factory(\"Preferences\", function(){\r\n//- Consolidate standardPreferences, userPreferences and generic core info from Twoday macros\r\n    var stdPreferences = JSON.parse($(\"#stdPreferences\").text() || \"{}\"),\r\n        usrPreferences = JSON.parse($(\"#usrPreferences\").text() || \"{}\");\r\n    return ($.extend( {}, stdPreferences, usrPreferences, window.f5CoreInfo));\r\n});\r\n\r\nf5SkinApp.controller(\"F5SkinController\", [\"$scope\", \"Preferences\", \"$modal\", function ($scope, preferences, $modal){\r\n\r\n//- Get the consolidated preferences data\r\n    $scope.param = preferences;\r\n\r\n//- Set background image based on hour of the day and user defined image items/slots\r\n    background.setImage($scope.param.timeSlots);\r\n\r\n//- Set default value for topics.text if user has not provided one\r\n    if ($scope.param.topbar.menuItems.topics.text.length===0)\r\n        $scope.param.topbar.menuItems.topics.text = $scope.param.siteAlias.toLowerCase();\r\n\r\n//- Adjust topics.class if topiclist-macro has found/generated any story topics\r\n    $scope.param.topbar.menuItems.topics.drop = ($(\"#toolbarTopics\").has(\".dropdown\"));\r\n\r\n//- Extract breadcrumb/special menu links and put them into the scope\r\n    $scope.param.topbar.menuItems.breadcrumbs.items = utils.getBreadcrumbs();\r\n    console.dir($scope.param.topbar.menuItems.breadcrumbs.items);\r\n    $scope.param.topbar.menuItems.abo.items = utils.getSpecialMenu(\"#aboMenu\");\r\n    $scope.param.topbar.menuItems.images.items = utils.getSpecialMenu(\"#imageMenu\");\r\n\r\n//- Add utility functions to be used in ng-functions (view)\r\n    $scope.param.isLoggedIn = function(){\r\n        return ($scope.param.userName.length>0);\r\n    };\r\n    $scope.param.isAdmin = function(){\r\n        return ($scope.param.isLoggedIn() && $scope.param.userRole()===\"Administrator\");\r\n    };\r\n    $scope.param.isContributor = function(){\r\n        return ($scope.param.isLoggedIn() && ($scope.param.userRole()===\"Contributor\" || $scope.param.userRole()===\"Administrator\"));\r\n    };\r\n    $scope.param.sendMail = function(){\r\n        window.location.href = utils.rot13($scope.param.topbar.mailIcon.href);\r\n    };\r\n\r\n//- When true (user clicked the close button), it triggers the fadeout of the response alert-box\r\n    $scope.msgClose = false;\r\n\r\n    $scope.customize = {\r\n\r\n        open: function(){\r\n            var modalCustomize = $modal.open({\r\n                templateUrl: \"customizeBlogHtml\",\r\n                controller:  \"CustomizeBlogController\",\r\n                resolve: {\r\n                    param: function (){\r\n                        return $scope.param;\r\n                    }\r\n                },\r\n                backdrop: \"static\",\r\n                keyboard: false,\r\n                windowClass: \"xlarge\"\r\n            });\r\n            modalCustomize.result.then(function(customizedParams){\r\n                //dosomething after OK\r\n            }, function(message){\r\n                //dosomething upon cancel\r\n            });\r\n        }\r\n    };\r\n}]);\r\n\r\nf5SkinApp.controller(\"CustomizeBlogController\", [\"$scope\", \"$modalInstance\", function ($scope, $modalInstance, param){\r\n\r\n    $scope.param = param;\r\n\r\n    $scope.ok = function(){\r\n        $modalInstance.close(\"Pressed OK!\");\r\n    };\r\n\r\n    $scope.cancel = function(){\r\n        $modalInstance.dismiss(\"Pressed Cancel!\");\r\n    }\r\n\r\n}]);\r\n\r\nf5SkinApp.controller(\"tmplGrunddatenController\", [\"$scope\", \"Preferences\", function($scope, preferences){\r\n    $scope.input = preferences;\r\n\r\n    $scope.setStaticFolder = function(){\r\n        $scope.input.site.imgFolder = $scope.input.staticUrl + $scope.input.userName + \"/images/\";\r\n    };\r\n\r\n    $scope.testLoader = function(){\r\n        $(\"#loader-wrapper\").show(0).delay(3000).hide(0);\r\n    }\r\n}]);\r\n\r\nf5SkinApp.controller(\"tmplHintergrundbilderController\", [\"$scope\", \"Preferences\", function($scope, preferences){\r\n    $scope.input = preferences;\r\n\r\n    $scope.positions = [\r\n        \"left top\", \"left center\", \"left bottom\",\r\n        \"right top\", \"right center\", \"right bottom\",\r\n        \"center top\", \"center center\", \"center bottom\"\r\n    ];\r\n\r\n    $scope.repeats = [ \"repeat\", \"repeat-x\", \"repeat-y\", \"no-repeat\" ];\r\n\r\n    $scope.sizes = [ \"auto\", \"cover\", \"contain\" ];\r\n\r\n    $scope.attachments = [ \"fixed\", \"local\", \"scroll\" ];\r\n\r\n    $scope.isEditMode = $scope.isCreateMode = false;\r\n\r\n    $scope.edit = function(index){\r\n        $scope.slot = angular.copy($scope.input.timeSlots[index]);\r\n        $scope.index = index;\r\n        $scope.isEditMode = true;\r\n    };\r\n\r\n    $scope.cancel = function(){\r\n        if ($scope.isCreateMode) delete $scope.slot;\r\n        $scope.isEditMode = $scope.isCreateMode = false;\r\n    };\r\n\r\n    $scope.save = function(){\r\n        if ($scope.isCreateMode) $scope.insert(); else $scope.update();\r\n        $scope.isEditMode = $scope.isCreateMode = false;\r\n    };\r\n\r\n    $scope.insert = function(){\r\n        $scope.input.timeSlots.push($scope.slot);\r\n    };\r\n\r\n    $scope.update = function(){\r\n        $scope.input.timeSlots[$scope.index] = $scope.slot;\r\n    };\r\n\r\n    $scope.delete = function(index){\r\n        $scope.input.timeSlots.splice(index, 1);\r\n    };\r\n\r\n    $scope.create = function(){\r\n        $scope.slot = { \"from\": 0, \"to\": 23, \"repeat\": \"no-repeat\", \"position\": \"top center\", \"size\": \"cover\",\r\n              \"attachment\": \"fixed\", \"href\": \"\" };\r\n        $scope.isCreateMode = true;\r\n    };\r\n\r\n    $scope.usePosition = function(index){\r\n        $scope.slot.position = $scope.positions[index];\r\n    };\r\n\r\n    $scope.useRepeat = function(index){\r\n        $scope.slot.repeat = $scope.repeats[index];\r\n    };\r\n\r\n    $scope.useSize = function(index){\r\n        $scope.slot.size = $scope.sizes[index];\r\n    };\r\n\r\n    $scope.useAttachment = function(index){\r\n        $scope.slot.attachment = $scope.attachments[index];\r\n    };\r\n\r\n}]);","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\nvar angular = (typeof window !== \"undefined\" ? window.angular : typeof global !== \"undefined\" ? global.angular : null),\r\n    background = require('./background.js'),\r\n    bodyclass = require('./bodyclass.js'),\r\n    utils = require('./utils.js');\r\n\r\n//--- Add additional body classes for individualized CSS rules\r\nbodyclass();\r\n\r\n//--- Pimp old Twoday classes, e.g. button in a .message\r\nutils.pimpClasses();\r\n\r\n//--- Set up the Angular app and controller\r\nvar f5SkinApp = angular.module(\"f5SkinApp\", ['mm.foundation']);\r\n\r\nf5SkinApp.factory(\"Preferences\", function(){\r\n//- Consolidate standardPreferences, userPreferences and generic core info from Twoday macros\r\n    var stdPreferences = JSON.parse($(\"#stdPreferences\").text() || \"{}\"),\r\n        usrPreferences = JSON.parse($(\"#usrPreferences\").text() || \"{}\");\r\n    return ($.extend( {}, stdPreferences, usrPreferences, window.f5CoreInfo));\r\n});\r\n\r\nf5SkinApp.controller(\"F5SkinController\", [\"$scope\", \"Preferences\", \"$modal\", function ($scope, preferences, $modal){\r\n\r\n//- Get the consolidated preferences data\r\n    $scope.param = preferences;\r\n\r\n//- Set background image based on hour of the day and user defined image items/slots\r\n    background.setImage($scope.param.timeSlots);\r\n\r\n//- Set default value for topics.text if user has not provided one\r\n    if ($scope.param.topbar.menuItems.topics.text.length===0)\r\n        $scope.param.topbar.menuItems.topics.text = $scope.param.siteAlias.toLowerCase();\r\n\r\n//- Adjust topics.class if topiclist-macro has found/generated any story topics\r\n    $scope.param.topbar.menuItems.topics.drop = ($(\"#toolbarTopics\").has(\".dropdown\"));\r\n\r\n//- Extract breadcrumb/special menu links and put them into the scope\r\n    $scope.param.topbar.menuItems.breadcrumbs.items = utils.getBreadcrumbs();\r\n    console.dir($scope.param.topbar.menuItems.breadcrumbs.items);\r\n    $scope.param.topbar.menuItems.abo.items = utils.getSpecialMenu(\"#aboMenu\");\r\n    $scope.param.topbar.menuItems.images.items = utils.getSpecialMenu(\"#imageMenu\");\r\n\r\n//- Add utility functions to be used in ng-functions (view)\r\n    $scope.param.isLoggedIn = function(){\r\n        return ($scope.param.userName.length>0);\r\n    };\r\n    $scope.param.isAdmin = function(){\r\n        return ($scope.param.isLoggedIn() && $scope.param.userRole()===\"Administrator\");\r\n    };\r\n    $scope.param.isContributor = function(){\r\n        return ($scope.param.isLoggedIn() && ($scope.param.userRole()===\"Contributor\" || $scope.param.userRole()===\"Administrator\"));\r\n    };\r\n    $scope.param.sendMail = function(){\r\n        window.location.href = utils.rot13($scope.param.topbar.mailIcon.href);\r\n    };\r\n\r\n//- When true (user clicked the close button), it triggers the fadeout of the response alert-box\r\n    $scope.msgClose = false;\r\n\r\n    $scope.customize = {\r\n\r\n        open: function(){\r\n            var modalCustomize = $modal.open({\r\n                templateUrl: \"customizeBlogHtml\",\r\n                controller:  \"CustomizeBlogController\",\r\n                resolve: {\r\n                    param: function (){\r\n                        return $scope.param;\r\n                    }\r\n                },\r\n                backdrop: \"static\",\r\n                keyboard: false,\r\n                windowClass: \"xlarge\"\r\n            });\r\n            modalCustomize.result.then(function(customizedParams){\r\n                //dosomething after OK\r\n            }, function(message){\r\n                //dosomething upon cancel\r\n            });\r\n        }\r\n    };\r\n}]);\r\n\r\nf5SkinApp.controller(\"CustomizeBlogController\", [\"$scope\", \"$modalInstance\", function ($scope, $modalInstance, param){\r\n\r\n    $scope.param = param;\r\n\r\n    $scope.ok = function(){\r\n        $modalInstance.close(\"Pressed OK!\");\r\n    };\r\n\r\n    $scope.cancel = function(){\r\n        $modalInstance.dismiss(\"Pressed Cancel!\");\r\n    }\r\n\r\n}]);\r\n\r\nf5SkinApp.controller(\"tmplGrunddatenController\", [\"$scope\", \"Preferences\", function($scope, preferences){\r\n    $scope.input = preferences;\r\n\r\n    $scope.setStaticFolder = function(){\r\n        $scope.input.site.imgFolder = $scope.input.staticUrl + $scope.input.userName + \"/images/\";\r\n    };\r\n\r\n    $scope.testLoader = function(){\r\n        $(\"#loader-wrapper\").show(0).delay(3000).hide(0);\r\n    }\r\n}]);\r\n\r\nf5SkinApp.controller(\"tmplHintergrundbilderController\", [\"$scope\", \"Preferences\", function($scope, preferences){\r\n    $scope.input = preferences;\r\n\r\n    $scope.positions = [\r\n        \"left top\", \"left center\", \"left bottom\",\r\n        \"right top\", \"right center\", \"right bottom\",\r\n        \"center top\", \"center center\", \"center bottom\"\r\n    ];\r\n\r\n    $scope.repeats = [ \"repeat\", \"repeat-x\", \"repeat-y\", \"no-repeat\" ];\r\n\r\n    $scope.sizes = [ \"auto\", \"cover\", \"contain\" ];\r\n\r\n    $scope.attachments = [ \"fixed\", \"local\", \"scroll\" ];\r\n\r\n    $scope.isEditMode = $scope.isCreateMode = false;\r\n\r\n    $scope.edit = function(index){\r\n        $scope.slot = angular.copy($scope.input.timeSlots[index]);\r\n        $scope.index = index;\r\n        $scope.isEditMode = true;\r\n    };\r\n\r\n    $scope.cancel = function(){\r\n        if ($scope.isCreateMode) delete $scope.slot;\r\n        $scope.isEditMode = $scope.isCreateMode = false;\r\n    };\r\n\r\n    $scope.save = function(){\r\n        if ($scope.isCreateMode) $scope.insert(); else $scope.update();\r\n        $scope.isEditMode = $scope.isCreateMode = false;\r\n    };\r\n\r\n    $scope.insert = function(){\r\n        $scope.input.timeSlots.push($scope.slot);\r\n    };\r\n\r\n    $scope.update = function(){\r\n        $scope.input.timeSlots[$scope.index] = $scope.slot;\r\n    };\r\n\r\n    $scope.delete = function(index){\r\n        $scope.input.timeSlots.splice(index, 1);\r\n    };\r\n\r\n    $scope.create = function(){\r\n        $scope.slot = { \"from\": 0, \"to\": 23, \"repeat\": \"no-repeat\", \"position\": \"top center\", \"size\": \"cover\",\r\n              \"attachment\": \"fixed\", \"href\": \"\" };\r\n        $scope.isCreateMode = true;\r\n    };\r\n\r\n    $scope.usePosition = function(index){\r\n        $scope.slot.position = $scope.positions[index];\r\n    };\r\n\r\n    $scope.useRepeat = function(index){\r\n        $scope.slot.repeat = $scope.repeats[index];\r\n    };\r\n\r\n    $scope.useSize = function(index){\r\n        $scope.slot.size = $scope.sizes[index];\r\n    };\r\n\r\n    $scope.useAttachment = function(index){\r\n        $scope.slot.attachment = $scope.attachments[index];\r\n    };\r\n\r\n}]);","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\n/**\r\n * Sets the appropriate background image based on the actual hour of the day and user defined image items/slots\r\n */\r\nmodule.exports = {\r\n    setImage: function(timeSlots){\r\n//----- return immediately if there are no user defined time slots/images        \r\n        if (timeSlots.length===0) return;\r\n//----- get the current hour of the day        \r\n        var h = new Date().getHours();\r\n//----- check with each timeslot to find the appropriate entry\r\n        $.each( timeSlots, function(){\r\n            if (h>=this.from && h<this.to){\r\n//------------- once timeslot was found, preload the image\r\n                var self = this;\r\n                $('<img/>').attr('src', self.href).load( function(){\r\n//----------------- remove the temp img to prevent memory leaks\r\n                    $(this).remove();\r\n//----------------- now set the background-image with all params\r\n                    $('body').css({\r\n                        'background-image': 'url(\"'+self.href+'\")',\r\n                        'background-repeat': self.repeat,\r\n                        'background-position': self.position,\r\n                        'background-attachment': self.attachment,\r\n                        'background-size': self.size,\r\n                        'height': '100%'\r\n                    });\r\n//----------------- and fade the preloading animation\r\n                    $(\"#loader-wrapper\").fadeOut(\"slow\");\r\n                });\r\n//------------- then quit the each loop\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n};","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\n/**\r\n * Adds additional classes to the BODY element\r\n * onHome ~ if the homepage is displayed\r\n * onTopic ~ if a topic page is displayed\r\n * topic-{topicID} ~ ID of the topic (lowercase ID)\r\n * onStory ~ if a story is displayed\r\n * story-{storyID} ~ ID of the story (lowercase ID)\r\n *\r\n * Examples:\r\n * pathname=\"/\" ===> bodyclasses=\"onHome\"\r\n * pathname=\"/topics/Testthema/\" ==> bodyclasses=\"onTopic topic-testthema\"\r\n * pathname=\"/stories/is-it-me-youre-looking-for/\" ==> bodyclasses=\"onStory story-is-it-me-youre-looking-for\"\r\n *\r\n */\r\nmodule.exports = function(){\r\n    var bodyclass = \"\";\r\n    if (location.pathname===\"/\") bodyclass = \"onHome\";\r\n    else {\r\n        var path = location.pathname.replace(/\\//g, \" \").trim().split(\" \");\r\n        switch (path[0]) {\r\n            case \"topics\":  bodyclass = \"onTopic \" + path[1].toLowerCase(); break;\r\n            case \"stories\": bodyclass = \"onStory \" + path[1].toLowerCase(); break;\r\n        }\r\n    }\r\n    if (bodyclass.length>0) $(\"body\").addClass(bodyclass);\r\n};","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\nmodule.exports = {\r\n\r\n//- Converts selected DOM links to an array of link objects (href,text)\r\n    linksToObjects: function(selector){\r\n        var linkObjects = [];\r\n            $(selector).each( function(){\r\n                linkObjects.push({ \"href\": this.href, \"text\": this.innerText });\r\n            });\r\n        return linkObjects;\r\n    },\r\n\r\n//- Extract breadcrumbs-links out of Twoday's modToolbarNavigationpath-macro and return as an array of link objects\r\n    getBreadcrumbs: function(){\r\n        return this.linksToObjects(\"#breadcrumbsMenu >a:not([id])\");\r\n    },\r\n\r\n//- Get special menu items (imageMenu/aboMenu) as an array of link objects\r\n    getSpecialMenu: function(menuID){\r\n        return this.linksToObjects(menuID+\" a\");\r\n    },\r\n\r\n//- Pimp server generated Twoday classes to enforce Foundation style\r\n    pimpClasses: function(){\r\n        $(\".message .button\").addClass(\"secondary tiny radius\");\r\n    },\r\n\r\n//- Rotation13 method used to obfuscate email-address\r\n    rot13: function(s){\r\n        return s.replace(/[a-zA-Z]/g, function(c){\r\n            return String.fromCharCode((c <= \"Z\" ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26);\r\n        });\r\n    }\r\n\r\n};"],"sourceRoot":"/source/"}