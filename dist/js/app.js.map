{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.js","src/js/app/app.js","src/js/app/background.js","src/js/app/bodyclass.js","src/js/app/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"global","window","$","angular","background","bodyclass","utils","pimpClasses","f5SkinApp","module","controller","$scope","$modal","stdPreferences","JSON","parse","text","usrPreferences","param","extend","f5CoreInfo","setImage","timeSlots","topbar","menuItems","topics","siteAlias","toLowerCase","has","breadcrumbs","items","getBreadcrumbs","abo","getSpecialMenu","images","isLoggedIn","userName","isAdmin","userRole","isContributor","sendMail","location","href","rot13","mailIcon","msgClose","customize","open","modalCustomize","templateUrl","resolve","params","backdrop","keyboard","windowClass","result","then","$modalInstance","ok","close","cancel","dismiss","this","self","./background.js","./bodyclass.js","./utils.js",2,"h","Date","getHours","each","from","to","attr","load","remove","css","background-image","background-repeat","repeat","background-position","position","background-attachment","attachment","background-size","size","height","fadeOut",3,"pathname","path","replace","trim","split","addClass",4,"linksToObjects","selector","linkObjects","push","innerText","menuID","c","String","fromCharCode","charCodeAt"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('jquery');\r\nvar angular = require('angular'),\r\n    background = require('./background.js'),\r\n    bodyclass = require('./bodyclass.js'),\r\n    utils = require('./utils.js');\r\n\r\n//--- Add additional body classes for individualized CSS rules\r\nbodyclass();\r\n\r\n//--- Pimp old Twoday classes, e.g. button in a .message\r\nutils.pimpClasses();\r\n\r\n//--- Set up the Angular app and controller\r\nvar f5SkinApp = angular.module(\"f5SkinApp\", ['mm.foundation']);\r\nf5SkinApp.controller(\"F5SkinController\", [\"$scope\", \"$modal\", function ($scope, $modal){\r\n\r\n//- Consolidate standardPreferences, userPreferences and generic core info from Twoday macros\r\n    var stdPreferences = JSON.parse($(\"#stdPreferences\").text() || \"{}\"),\r\n        usrPreferences = JSON.parse($(\"#usrPreferences\").text() || \"{}\");\r\n    $scope.param = $.extend( {}, stdPreferences, usrPreferences, f5CoreInfo );\r\n\r\n//- Set background image based on hour of the day and user defined image items/slots\r\n    background.setImage($scope.param.timeSlots);\r\n\r\n//- Set default value for topics.text if user has not provided one\r\n    if ($scope.param.topbar.menuItems.topics.text.length===0)\r\n        $scope.param.topbar.menuItems.topics.text = $scope.param.siteAlias.toLowerCase();\r\n\r\n//- Adjust topics.class if topiclist-macro has found/generated any story topics\r\n    $scope.param.topbar.menuItems.topics.class = ($(\"#toolbarTopics\").has(\".dropdown\") ? \"has-dropdown\" : \"\");\r\n\r\n//- Extract breadcrumb/special menu links and put them into the scope\r\n    $scope.param.topbar.menuItems.breadcrumbs.items = utils.getBreadcrumbs();\r\n    $scope.param.topbar.menuItems.abo.items = utils.getSpecialMenu(\"#aboMenu\");\r\n    $scope.param.topbar.menuItems.images.items = utils.getSpecialMenu(\"#imageMenu\");\r\n\r\n//- Add utility functions to be used in ng-functions (view)\r\n    $scope.param.isLoggedIn = function(){\r\n        return ($scope.param.userName.length>0);\r\n    };\r\n    $scope.param.isAdmin = function(){\r\n        return ($scope.param.isLoggedIn() && $scope.param.userRole()===\"Administrator\");\r\n    };\r\n    $scope.param.isContributor = function(){\r\n        return ($scope.param.isLoggedIn() && ($scope.param.userRole()===\"Contributor\" || $scope.param.userRole()===\"Administrator\"));\r\n    };\r\n    $scope.param.sendMail = function(){\r\n        window.location.href = utils.rot13($scope.param.topbar.mailIcon.href);\r\n    };\r\n\r\n//- When true (user clicked the close button), it triggers the fadeout of the response alert-box\r\n    $scope.msgClose = false;\r\n\r\n    $scope.customize = {\r\n\r\n        open: function(){\r\n            var modalCustomize = $modal.open({\r\n                templateUrl: \"customizeBlogHtml\",\r\n                controller:  \"CustomizeBlogController\",\r\n                resolve: {\r\n                    params: function () {\r\n                        return $scope.param;\r\n                    }\r\n                },\r\n                backdrop: false,\r\n                keyboard: false,\r\n                windowClass: \"xlarge\"\r\n            });\r\n            modalCustomize.result.then(function(customizedParams){\r\n                //dosomething after OK\r\n            }, function(message){\r\n                //dosomething upon cancel\r\n            });\r\n        }\r\n    };\r\n}]);\r\n\r\nf5SkinApp.controller(\"CustomizeBlogController\", [\"$scope\", \"$modalInstance\", function ($scope, $modalInstance, params){\r\n\r\n    $scope.param = params;\r\n\r\n    $scope.ok = function(){\r\n        $modalInstance.close(\"Pressed OK!\");\r\n    }\r\n\r\n    $scope.cancel = function(){\r\n        $modalInstance.dismiss(\"Pressed Cancel!\");\r\n    }\r\n\r\n}]);","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\nvar angular = (typeof window !== \"undefined\" ? window.angular : typeof global !== \"undefined\" ? global.angular : null),\r\n    background = require('./background.js'),\r\n    bodyclass = require('./bodyclass.js'),\r\n    utils = require('./utils.js');\r\n\r\n//--- Add additional body classes for individualized CSS rules\r\nbodyclass();\r\n\r\n//--- Pimp old Twoday classes, e.g. button in a .message\r\nutils.pimpClasses();\r\n\r\n//--- Set up the Angular app and controller\r\nvar f5SkinApp = angular.module(\"f5SkinApp\", ['mm.foundation']);\r\nf5SkinApp.controller(\"F5SkinController\", [\"$scope\", \"$modal\", function ($scope, $modal){\r\n\r\n//- Consolidate standardPreferences, userPreferences and generic core info from Twoday macros\r\n    var stdPreferences = JSON.parse($(\"#stdPreferences\").text() || \"{}\"),\r\n        usrPreferences = JSON.parse($(\"#usrPreferences\").text() || \"{}\");\r\n    $scope.param = $.extend( {}, stdPreferences, usrPreferences, f5CoreInfo );\r\n\r\n//- Set background image based on hour of the day and user defined image items/slots\r\n    background.setImage($scope.param.timeSlots);\r\n\r\n//- Set default value for topics.text if user has not provided one\r\n    if ($scope.param.topbar.menuItems.topics.text.length===0)\r\n        $scope.param.topbar.menuItems.topics.text = $scope.param.siteAlias.toLowerCase();\r\n\r\n//- Adjust topics.class if topiclist-macro has found/generated any story topics\r\n    $scope.param.topbar.menuItems.topics.class = ($(\"#toolbarTopics\").has(\".dropdown\") ? \"has-dropdown\" : \"\");\r\n\r\n//- Extract breadcrumb/special menu links and put them into the scope\r\n    $scope.param.topbar.menuItems.breadcrumbs.items = utils.getBreadcrumbs();\r\n    $scope.param.topbar.menuItems.abo.items = utils.getSpecialMenu(\"#aboMenu\");\r\n    $scope.param.topbar.menuItems.images.items = utils.getSpecialMenu(\"#imageMenu\");\r\n\r\n//- Add utility functions to be used in ng-functions (view)\r\n    $scope.param.isLoggedIn = function(){\r\n        return ($scope.param.userName.length>0);\r\n    };\r\n    $scope.param.isAdmin = function(){\r\n        return ($scope.param.isLoggedIn() && $scope.param.userRole()===\"Administrator\");\r\n    };\r\n    $scope.param.isContributor = function(){\r\n        return ($scope.param.isLoggedIn() && ($scope.param.userRole()===\"Contributor\" || $scope.param.userRole()===\"Administrator\"));\r\n    };\r\n    $scope.param.sendMail = function(){\r\n        window.location.href = utils.rot13($scope.param.topbar.mailIcon.href);\r\n    };\r\n\r\n//- When true (user clicked the close button), it triggers the fadeout of the response alert-box\r\n    $scope.msgClose = false;\r\n\r\n    $scope.customize = {\r\n\r\n        open: function(){\r\n            var modalCustomize = $modal.open({\r\n                templateUrl: \"customizeBlogHtml\",\r\n                controller:  \"CustomizeBlogController\",\r\n                resolve: {\r\n                    params: function () {\r\n                        return $scope.param;\r\n                    }\r\n                },\r\n                backdrop: false,\r\n                keyboard: false,\r\n                windowClass: \"xlarge\"\r\n            });\r\n            modalCustomize.result.then(function(customizedParams){\r\n                //dosomething after OK\r\n            }, function(message){\r\n                //dosomething upon cancel\r\n            });\r\n        }\r\n    };\r\n}]);\r\n\r\nf5SkinApp.controller(\"CustomizeBlogController\", [\"$scope\", \"$modalInstance\", function ($scope, $modalInstance, params){\r\n\r\n    $scope.param = params;\r\n\r\n    $scope.ok = function(){\r\n        $modalInstance.close(\"Pressed OK!\");\r\n    }\r\n\r\n    $scope.cancel = function(){\r\n        $modalInstance.dismiss(\"Pressed Cancel!\");\r\n    }\r\n\r\n}]);","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\n/**\r\n * Sets the appropriate background image based on the actual hour of the day and user defined image items/slots\r\n */\r\nmodule.exports = {\r\n    setImage: function(timeSlots){\r\n//----- return immediately if there are no user defined time slots/images        \r\n        if (timeSlots.length===0) return;\r\n//----- get the current hour of the day        \r\n        var h = new Date().getHours();\r\n//----- check with each timeslot to find the appropriate entry\r\n        $.each( timeSlots, function(){\r\n            if (h>=this.from && h<this.to){\r\n//------------- once timeslot was found, preload the image\r\n                var self = this;\r\n                $('<img/>').attr('src', self.href).load( function(){\r\n//----------------- remove the temp img to prevent memory leaks\r\n                    $(this).remove();\r\n//----------------- now set the background-image with all params\r\n                    $('body').css({\r\n                        'background-image': 'url(\"'+self.href+'\")',\r\n                        'background-repeat': self.repeat,\r\n                        'background-position': self.position,\r\n                        'background-attachment': self.attachment,\r\n                        'background-size': self.size,\r\n                        'height': '100%'\r\n                    });\r\n//----------------- and fade the preloading animation\r\n                    $(\"#loader-wrapper\").fadeOut(\"slow\");\r\n                });\r\n//------------- then quit the each loop\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n};","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\n/**\r\n * Adds additional classes to the BODY element\r\n * onHome ~ if the homepage is displayed\r\n * onTopic ~ if a topic page is displayed\r\n * topic-{topicID} ~ ID of the topic (lowercase ID)\r\n * onStory ~ if a story is displayed\r\n * story-{storyID} ~ ID of the story (lowercase ID)\r\n *\r\n * Examples:\r\n * pathname=\"/\" ===> bodyclasses=\"onHome\"\r\n * pathname=\"/topics/Testthema/\" ==> bodyclasses=\"onTopic topic-testthema\"\r\n * pathname=\"/stories/is-it-me-youre-looking-for/\" ==> bodyclasses=\"onStory story-is-it-me-youre-looking-for\"\r\n *\r\n */\r\nmodule.exports = function(){\r\n    var bodyclass = \"\";\r\n    if (location.pathname===\"/\") bodyclass = \"onHome\";\r\n    else {\r\n        var path = location.pathname.replace(/\\//g, \" \").trim().split(\" \");\r\n        switch (path[0]) {\r\n            case \"topics\":  bodyclass = \"onTopic \" + path[1].toLowerCase(); break;\r\n            case \"stories\": bodyclass = \"onStory \" + path[1].toLowerCase(); break;\r\n        }\r\n    }\r\n    if (bodyclass.length>0) $(\"body\").addClass(bodyclass);\r\n};","(typeof window !== \"undefined\" ? window.$ : typeof global !== \"undefined\" ? global.$ : null);\r\nmodule.exports = {\r\n\r\n//- Converts selected DOM links to an array of link objects (href,text)\r\n    linksToObjects: function(selector){\r\n        var linkObjects = [];\r\n            $(selector).each( function(){\r\n                linkObjects.push({ \"href\": this.href, \"text\": this.innerText });\r\n            });\r\n        return linkObjects;\r\n    },\r\n\r\n//- Extract breadcrumbs-links out of Twoday's modToolbarNavigationpath-macro and return as an array of link objects\r\n    getBreadcrumbs: function(){\r\n        return this.linksToObjects(\"#breadcrumbsMenu >a:not([id])\");\r\n    },\r\n\r\n//- Get special menu items (imageMenu/aboMenu) as an array of link objects\r\n    getSpecialMenu: function(menuID){\r\n        return this.linksToObjects(menuID+\" a\");\r\n    },\r\n\r\n//- Pimp server generated Twoday classes to enforce Foundation style\r\n    pimpClasses: function(){\r\n        $(\".message .button\").addClass(\"secondary tiny radius\");\r\n    },\r\n\r\n//- Rotation13 method used to obfuscate email-address\r\n    rot13: function(s){\r\n        return s.replace(/[a-zA-Z]/g, function(c){\r\n            return String.fromCharCode((c <= \"Z\" ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26);\r\n        });\r\n    }\r\n\r\n};"],"sourceRoot":"/source/"}