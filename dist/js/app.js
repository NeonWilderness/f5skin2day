!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){(function(t){"undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null;var n="undefined"!=typeof window?window.angular:"undefined"!=typeof t?t.angular:null,o=e("./background.js"),i=e("./bodyclass.js"),r=e("./utils.js");i(),r.pimpClasses();var s=n.module("f5SkinApp",["mm.foundation"]).constant("Modernizr",window.Modernizr).run(function(){window.FastClick.attach(document.body)});s.factory("Preferences",function(){var e=JSON.parse($("#stdPreferences").text()||"{}"),t=JSON.parse($("#usrPreferences").text()||"{}"),n=$.extend({},e,t,window.f5CoreInfo);return n.update.lastCheck=new Date(Date.parse(n.update.lastCheck)),$.each(n.timeSlots,function(){this.from=new Date(1970,0,1,this.from/60>>0,this.from%60,0),this.to=new Date(1970,0,1,this.to/60>>0,this.to%60,0)}),n}),s.controller("F5SkinController",["$scope","Preferences","$modal",function(e,t,n){e.param=t,o.setImage(e.param.timeSlots),0===e.param.topbar.menuItems.topics.text.length&&(e.param.topbar.menuItems.topics.text=e.param.siteAlias.toLowerCase()),e.param.topbar.menuItems.topics.drop=$("#toolbarTopics").has(".dropdown"),e.param.topbar.menuItems.breadcrumbs.items=r.getBreadcrumbs(),e.param.topbar.menuItems.abo.items=r.getSpecialMenu("#aboMenu"),e.param.topbar.menuItems.images.items=r.getSpecialMenu("#imageMenu"),e.param.isLoggedIn=function(){return e.param.userName.length>0},e.param.isAdmin=function(){return e.param.isLoggedIn()&&"Administrator"===e.param.userRole()},e.param.isContributor=function(){return e.param.isLoggedIn()&&("Contributor"===e.param.userRole()||"Administrator"===e.param.userRole())},e.param.sendMail=function(){window.location.href=r.rot13(e.param.topbar.mailIcon.href)},e.msgClose=!1,e.customize={open:function(){var t=n.open({templateUrl:"customizeBlogHtml",controller:"CustomizeBlogController",resolve:{param:function(){return e.param}},backdrop:"static",keyboard:!1,windowClass:"xlarge"});t.result.then(function(e){},function(e){})}}}]),s.controller("CustomizeBlogController",["$scope","$modalInstance",function(e,t,n){e.param=n,e.ok=function(){t.close("Pressed OK!")},e.cancel=function(){t.dismiss("Pressed Cancel!")}}]),s.controller("tmplGrunddatenController",["$scope","Preferences",function(e,t){e.input=t,e.setStaticFolder=function(){e.input.site.imgFolder=e.input.staticUrl+e.input.userName+"/images/"},e.testLoader=function(){$("#loader-wrapper").show(0).delay(3e3).hide(0)}}]),s.controller("tmplHintergrundbilderController",["$scope","Preferences",function(e,t){e.input=t,e.positions=["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"],e.repeats=["repeat","repeat-x","repeat-y","no-repeat"],e.sizes=["auto","cover","contain"],e.attachments=["fixed","local","scroll"],e.isEditMode=e.isCreateMode=!1,e.slotCheck=function(){var t=e.input.timeSlots,n=-1,o=t.length>0?"":"Keine Hintergrund-Zeitfenster vorhanden!";$.each(e.input.timeSlots,function(){return r.getMinute(this.from)!==n+1?(o=0>n?"Die Zeitangabe beginnt nicht bei 00:00 Uhr!":"Es besteht eine Zeitlücke bei "+r.formatTime(this.from)+" Uhr!",!1):void(n=r.getMinute(this.to))}),0===o.length&&1439!==n&&(o="Die Zeitangabe endet nicht bei 23:59 Uhr!"),e.slotStatusOK=0===o.length,e.slotStatus=e.slotStatusOK?"Alle Hintergrund-Zeitfenster vollständig definiert.":o},e.edit=function(t){e.slot=n.copy(e.input.timeSlots[t]),e.index=t,e.isEditMode=!0},e.cancel=function(){e.isCreateMode&&delete e.slot,e.isEditMode=e.isCreateMode=!1},e.save=function(){e.isCreateMode?e.insert():e.update(),e.slotCheck(),e.isEditMode=e.isCreateMode=!1},e.sort=function(){e.input.timeSlots.sort(function(e,t){return r.getMinute(e.from)-r.getMinute(t.from)})},e.findFirst=function(t){var n=e.input.timeSlots,o=-1;return $.each(n,function(e,n){return t(n)?(o=e,!1):void 0}),o},e.insert=function(){for(var t,o=e.input.timeSlots,i=0,s=null;i<o.length;)t=o[i],t.from>=e.slot.from&&t.to<=e.slot.to?e.remove(i,!1):i++;i=e.findFirst(function(t){return e.slot.from<t.to}),i>=0&&(e.slot.from>o[i].from&&e.slot.to<o[i].to?(s=n.copy(o[i]),s.from=r.addMinutes(e.slot.to,1),o[i].to=r.addMinutes(e.slot.from,-1)):e.slot.from<=o[i].from&&e.slot.to<o[i].to?o[i].from=r.addMinutes(e.slot.to,1):e.slot.to>=o[i].to&&(o[i].to=r.addMinutes(e.slot.from,-1),o.length>i+1&&(o[i+1].from=r.addMinutes(e.slot.to,1)))),o.push(e.slot),null!==s&&o.push(s),e.sort()},e.update=function(){e.input.timeSlots[e.index]=e.slot,e.sort()},e.remove=function(t,n){var o=e.input.timeSlots;t>0?o[t-1].to=o[t].to:o.length>1&&(o[1].from=o[0].from),o.splice(t,1),e.slotCheck()},e.create=function(){e.slot={from:new Date(1970,0,1,0,0,0),to:new Date(1970,0,1,23,59,0),repeat:"no-repeat",position:"center top",size:"cover",attachment:"fixed",href:e.input.site.imgFolder},e.isCreateMode=!0},e.usePosition=function(t){e.slot.position=e.positions[t]},e.useRepeat=function(t){e.slot.repeat=e.repeats[t]},e.useSize=function(t){e.slot.size=e.sizes[t]},e.useAttachment=function(t){e.slot.attachment=e.attachments[t]},e.slotCheck()}]),s.controller("tmplAktualisierung",["$scope","$filter","$http","Preferences",function(e,t,n,o){e.input=o,e.msgClose=!0,e.isChecking=!1,e.dateNextCheck=function(){return e.input.update.gap<0?"Keine Prüfung":t("date")(new Date(e.input.update.lastCheck.getTime()+e.input.update.gap),"dd.MM.yyyy HH:mm")},e.updateChecks=[{check:"täglich",gap:864e5},{check:"wöchentlich",gap:6048e5},{check:"monatlich",gap:2592e6},{check:"niemals",gap:-1}],e.useFrequency=function(t){var n=e.updateChecks[t];e.input.update.check=n.check,e.input.update.gap=n.gap},e.checkForUpdate=function(){e.isChecking=!0,n.get(e.input.update.releaseUrl+"releaseinfo.xml").success(function(t,n,o,i){e.release=r.getRelease($(t)),e.newVersion=r.parseVersion(e.release.version)>r.parseVersion(e.input.update.version),e.msgClose=!1,e.input.update.lastCheck=new Date,e.isChecking=!1}).error(function(t,n,o,i){e.isChecking=!1})},e.updateStatus=function(e){var t=["nicht geprüft","bleibt unverändert","wird aktualisiert","erfolgreich aktualisiert"];return t[e||0]},e.downloadRelease=function(){}}])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./background.js":2,"./bodyclass.js":3,"./utils.js":4}],2:[function(e,t,n){(function(e){"undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null,t.exports={setImage:function(e){var t=function(e){return 60*e.getHours()+e.getMinutes()};if(0!==e.length){var n=t(new Date);$.each(e,function(){if(n>=t(this.from)&&n<=t(this.to)){var e=this;return $("<img/>").attr("src",e.href).load(function(){$(this).remove(),$("body").css({"background-image":'url("'+e.href+'")',"background-repeat":e.repeat,"background-position":e.position,"background-attachment":e.attachment,"background-size":e.size,height:"100%"}),$("#loader-wrapper").fadeOut("slow")}),!1}})}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(e){"undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null,t.exports=function(){var e="";if("/"===location.pathname)e="onHome";else{var t=location.pathname.replace(/\//g," ").trim().split(" ");switch(t[0]){case"topics":e="onTopic "+t[1].toLowerCase();break;case"stories":e="onStory "+t[1].toLowerCase()}}e.length>0&&$("body").addClass(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(e){"undefined"!=typeof window?window.$:"undefined"!=typeof e?e.$:null,t.exports={linksToObjects:function(e){var t=[];return $(e).each(function(){t.push({href:this.href,text:this.innerText})}),t},getBreadcrumbs:function(){return this.linksToObjects("#breadcrumbsMenu >a:not([id])")},getSpecialMenu:function(e){return this.linksToObjects(e+" a")},pimpClasses:function(){$(".message .button").addClass("secondary tiny radius")},rot13:function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(("Z">=e?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26)})},getMinute:function(e){return 60*e.getHours()+e.getMinutes()},addMinutes:function(e,t){var n=this.getMinute(e)+t;return new Date(1970,0,1,n/60>>0,n%60,0)},formatTime:function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},parseVersion:function(e){return parseInt(e.replace(/\./g,""),10)},parseCRC:function(e){var t=e.match(/CRC32:.(.*)[ ]/);return null!==t?parseInt(t[1],10):-1},getRelease:function(e){var t={version:e.find("version").text(),author:e.find("author").text(),releasedate:new Date(Date.parse(e.find("releasedate").text())),skins:[]};return e.find("skin").each(function(){var e=$(this),n=e.attr("key"),o=new Date(Date.parse(e.attr("lastupdate"))),i=e.attr("crc"),r=e.find("content");t.skins.push({name:n,update:o,crc32:i,content:r,status:null})}),t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
//# sourceMappingURL=app.js.map